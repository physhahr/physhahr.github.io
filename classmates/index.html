<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <title>大安電機 117 乙｜猜猜窩是誰</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- Step1 -->
    <section id="step1" class="step card">
      <h2 class="title">Welcome</h2>
      <p class="subtitle">請先選擇你是誰</p>
      <div class="row">
        <label class="label">座號</label>
        <select id="seatSelect" class="input"></select>
      </div>
      <div class="row">
        <label class="label">姓名</label>
        <select id="nameSelect" class="input"></select>
      </div>
      <button id="goToStep2" class="btn">下一步</button>
    </section>

    <!-- Step2 -->
    <section id="step2" class="step card hidden">
      <h2 class="title">讓同學認識你</h2>
      <form id="introForm" novalidate>
        <div class="row">
          <label class="label">暱稱（選填）</label>
          <input id="nickname" class="input" type="text" />
        </div>

        <div class="row">
          <label class="label">生日（yyyy/mm/dd）</label>
          <input id="birthday" class="input" type="text" placeholder="例如：1989/06/04" />
          <small class="hint">格式需為 yyyy/mm/dd；選填</small>
        </div>

        <div class="row required">
          <label class="label">討厭／困惑（必填）</label>
          <textarea id="dislike" class="input textarea" rows="3"></textarea>
        </div>

        <div class="row required">
          <label class="label">喜歡／擅長（必填）</label>
          <textarea id="like" class="input textarea" rows="3"></textarea>
        </div>

        <div class="row required">
          <label class="label">我的三個關鍵字（必填）</label>
          <input id="keywords" class="input" type="text" placeholder="三個關鍵字（格式不拘）" />
        </div>

        <div class="row">
          <label class="label">IG（選填）</label>
          <input id="ig" class="input" type="text" placeholder="@username" />
        </div>

        <div class="row">
          <label class="label">備註（選填）</label>
          <textarea id="note" class="input textarea" rows="3"></textarea>
        </div>

        <button type="submit" class="btn">儲存並開始遊戲</button>
      </form>
    </section>

    <!-- Step3 -->
    <section id="step3" class="step card hidden">
      <h2 class="title">猜猜窩是誰</h2>

      <div id="modeSelect" class="mode-select">
        <button class="btn ghost" data-mode="1">玩法一：名字 → 座號</button>
        <button class="btn ghost" data-mode="2">玩法二：座號 → 名字</button>
        <button class="btn ghost" data-mode="3">玩法三：自介 → 選座號+名字</button>
      </div>

      <div id="gameArea" class="game hidden">
        <div id="gamePrompt" class="prompt"></div>

        <picture>
          <source id="imgWebp" type="image/webp" />
          <source id="imgJpg" type="image/jpeg" />
          <img id="gameImage" class="avatar" alt="同學頭像" width="240" height="240" />
        </picture>

        <div id="answerArea" class="answer"></div>

        <div style="display:flex; gap:12px; justify-content:center; margin-top:12px;">
          <button id="submitAnswer" class="btn primary">送出答案</button>
        </div>
      </div>

      <div id="resultArea" class="result hidden"></div>

      <div id="leaderboardBlock" class="card" style="margin-top:16px;">
        <h3>排行榜（玩法一 / 玩法二 各前5）</h3>
        <div style="display:flex; gap:12px; flex-wrap:wrap; justify-content:center;">
          <div id="lb1" class="lb"></div>
          <div id="lb2" class="lb"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- 將 script 設為 module (使用 Firebase v11 modular SDK) -->
  <script type="module" src="script.js"></script>
</body>
</html>
